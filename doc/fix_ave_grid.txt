"DSMC WWW Site"_dws - "DSMC Documentation"_dd - "DSMC Commands"_dc :c

:link(dws,http://dsmc.sandia.gov)
:link(dd,Manual.html)
:link(dc,Section_commands.html#comm)

:line

fix ave/grid command :h3

[Syntax:]

fix ID ave/grid Nevery Nrepeat Nfreq value1 value2 ... :pre

ID is documented in "fix"_fix.html command :ulb,l
ave/grid = style name of this fix command :l
Nevery = use input values every this many timesteps :l
Nrepeat = # of times to use input values for calculating averages :l
Nfreq = calculate averages every this many timesteps
zero or more input values can be listed :l
value = n, u, v, w, usq, vsq, wsq, c_ID, c_ID\[i\], f_ID, f_ID\[i\], v_name :l
  n = average particle count
  u,v,w = average x,y,z velocity
  usq,vsq,wsq = average x,y,z velocity squared
  c_ID = per-grid vector calculated by a compute with ID
  c_ID\[I\] = Ith column of per-grid array calculated by a compute with ID
  f_ID = per-grid vector calculated by a fix with ID
  f_ID\[I\] = Ith column of per-grid array calculated by a fix with ID
  v_name = per-grid vector calculated by an cell-style variable with name :pre
:ule

[Examples:]

fix 1 all ave/grid 1 100 100 :pre
fix 1 all ave/grid 10 20 1000 c_my_stress\[1\] :pre

[Description:]

Use one or more per-grid vectors as inputs every few timesteps, and
average them cell by cell over longer timescales.  The resulting
per-grid averages can be used by other output commands such as the
"dump grid"_dump.html command.

Each input value can be a cell attribute (ID, coordinates, etc) or can
be the result of a "compute"_compute.html or "fix"_fix.html or the
evaluation of an grid-style "variable"_variable.html.  In the latter
cases, the compute, fix, or variable must produce a per-grid vector,
not a global quantity or per-particle quantity.  If you wish to
time-average global quantities from a compute, fix, or variable, then
see the "fix ave/time"_fix_ave_time.html command.

"Computes"_compute.html that produce per-grid vectors or arrays are
those which have the word {grid} in their style name.  See the doc
pages for individual "fixes"_fix.html to determine which ones produce
per-grid vectors or arrays.  "Variables"_variable.html of style {grid}
are the only ones that can be used with this fix since they produce
per-grid vectors.

Each per-grid value of each input vector is averaged independently.

:line

The {Nevery}, {Nrepeat}, and {Nfreq} arguments specify on what
timesteps the input values will be used in order to contribute to the
average.  The final averaged quantities are generated on timesteps
that are a multiple of {Nfreq}.  The average is over {Nrepeat}
quantities, computed in the preceding portion of the simulation every
{Nevery} timesteps.  {Nfreq} must be a multiple of {Nevery} and
{Nevery} must be non-zero even if {Nrepeat} is 1.  Also, the timesteps
contributing to the average value cannot overlap, i.e. Nfreq >
(Nrepeat-1)*Nevery is required.

For example, if Nevery=2, Nrepeat=6, and Nfreq=100, then values on
timesteps 90,92,94,96,98,100 will be used to compute the final average
on timestep 100.  Similarly for timesteps 190,192,194,196,198,200 on
timestep 200, etc.

:line

NOTE: Currently no input values can be specified explicity with this
command.  When no values are specified, it is as if 7 values were
specified:

n u v w usq vsq wsq :pre

The grid attribute value {n} is the average number of particles per
grid cell.  The {u,v,w} attributes are the average velocities of the
particles in the x,y,z directions.  The {usq,vsq,wsq} attributes are
the average squared velocities of the particles in the x,y,z
directions.

If a value begins with "c_", a compute ID must follow which has been
previously defined in the input script.  If no bracketed term is
appended, the per-grid vector calculated by the compute is used.  If a
bracketed term containing an index I is appended, the Ith column of
the per-grid array calculated by the compute is used.  Users can also
write code for their own compute styles and "add them to
LAMMPS"_Section_modify.html.

If a value begins with "f_", a fix ID must follow which has been
previously defined in the input script.  If no bracketed term is
appended, the per-grid vector calculated by the fix is used.  If a
bracketed term containing an index I is appended, the Ith column of
the per-grid array calculated by the fix is used.  Note that some
fixes only produce their values on certain timesteps, which must be
compatible with {Nevery}, else an error will result.  Users can also
write code for their own fix styles and "add them to
LAMMPS"_Section_modify.html.

If a value begins with "v_", a variable name must follow which has
been previously defined in the input script as a "grid-style
variable"_variable.html Variables of style {grid} can reference
thermodynamic keywords, or invoke other computes, fixes, or variables
when they are evaluated, so this is a very general means of generating
per-grid quantities to time average.

:line

[Restart, fix_modify, output info:]

No information about this fix is written to "binary restart
files"_restart.html.  None of the "fix_modify"_fix_modify.html options
are relevant to this fix.

This fix produces a per-grid vector or array which can be accessed by
various output commands.  A vector is produced if only a single
quantity is averaged by this fix.  If two or more quantities are
averaged, then an array of values is produced, where the number of
columns is the number of quantities averaged.  The per-grid values can
only be accessed on timesteps that are multiples of {Nfreq} since that
is when averaging is performed.

[Restrictions:] none

[Related commands:]

"compute"_compute.html, "fix ave/histo"_fix_ave_histo.html, "fix
ave/spatial"_fix_ave_spatial.html, "fix ave/time"_fix_ave_time.html,
"variable"_variable.html,

[Default:] none

<HTML>
<CENTER><A HREF = "http://dsmc.sandia.gov">SPARTA WWW Site</A> - <A HREF = "Manual.html">SPARTA Documentation</A> - <A HREF = "Section_commands.html#comm">SPARTA Commands</A> 
</CENTER>






<HR>

<H3>dump command 
</H3>
<H3><A HREF = "dump_image.html">dump image</A> command 
</H3>
<P><B>Syntax:</B>
</P>
<PRE>dump ID style N file args 
</PRE>
<UL><LI>ID = user-assigned name for the dump 

<LI>style = <I>molecule</I> or <I>grid</I> or <I>surf</I> or <I>image</I> 

<LI>N = dump every this many timesteps 

<LI>file = name of file to write dump info to 

<LI>args = list of arguments for a particular style 

<PRE>  <I>molecule</I> args = list of molecule attributes
    possible attributes = id, type, proc, x, y, z, xs, ys, zs, vx, vy, vz,
                          c_ID, c_ID[N], f_ID, f_ID[N], v_name 
</PRE>
<PRE>      id = molecule ID
      type = molecule species
      proc = ID of owning processor
      x,y,z = unscaled molecule coordinates
      xs,ys,zs = scaled molecule coordinates
      vx,vy,vz = molecule velocities
      c_ID = per-molecule vector (or array) calculated by a compute with ID
      c_ID[N] = Nth column of per-molecule array calculated by a compute with ID
      f_ID = per-molecule vector (or array) calculated by a fix with ID
      f_ID[N] = Nth column of per-molecule array calculated by a fix with ID
      v_name = per-molecule vector calculated by a molecule-style variable with name 
</PRE>
<PRE>  <I>grid</I> args = list of grid attributes
    possible attributes = id, proc, xlo, ylo, zlo, xhi, yhi, zhi,
                          c_ID, c_ID[N], f_ID, f_ID[N], v_name 
</PRE>
<PRE>      id = grid cell ID
      proc = processor that owns grid cell
      xlo,ylo,zlo = coords of lower left corner of grid cell
      xhi,yhi,zhi = coords of lower left corner of grid cell
      c_ID = per-grid vector (or array) calculated by a compute with ID
      c_ID[N] = Nth column of per-grid array calculated by a compute with ID
      f_ID = per-grid vector (or array) calculated by a fix with ID
      f_ID[N] = Nth column of per-grid array calculated by a fix with ID
      v_name = per-grid vector calculated by a grid-style variable with name 
</PRE>
<PRE>  <I>surf</I> args = list of surf attributes
    possible attributes = id, v1x, v1y, v1z, v2x, v2y, v2z, v3x, v3y, v3z, 
                          c_ID, c_ID[N], f_ID, f_ID[N], v_name 
</PRE>
<PRE>      id = surf element ID
      v1x,v1y,v1z = coords of 1st vertex in surface element
      v1x,v1y,v1z = coords of 2nd vertex in surface element
      v1x,v1y,v1z = coords of 3rd vertex in surface element
      c_ID = per-surf vector (or array) calculated by a compute with ID
      c_ID[N] = Nth column of per-surf array calculated by a compute with ID
      f_ID = per-surf vector (or array) calculated by a fix with ID
      f_ID[N] = Nth column of per-surf array calculated by a fix with ID
      v_name = per-surf vector calculated by a surf-style variable with name 
</PRE>
<PRE>  <I>image</I> args = discussed on <A HREF = "dump_image.html">dump image</A> doc page 
</PRE>

</UL>
<P><B>Examples:</B>
</P>
<PRE>dump 1 molecule 100 dump.myforce.* id type x y vx fx
dump 2 molecule 100 dump.%.myforce id type c_myF[3] v_ke
dump 3 grid 1000 tmp.grid id proc xlo ylo zlo xhi yhi zhi 
</PRE>
<P><B>Description:</B>
</P>
<P>Dump a snapshot of simulation quantities to one or more files every N
timesteps in one of several styles.  The <I>image</I> style is the
exception; it creates a JPG or PPM image file of the simulation
configuration every N timesteps, as discussed on the <A HREF = "dump_image.html">dump
image</A> doc page.
</P>
<P>The <I>style</I> keyword determines what quantities are written to the file
and in what format.  Settings made via the
<A HREF = "dump_modify.html">dump_modify</A> command can also alter what info is
included in the file and the format of individual values.
</P>
<P>As described below, the filename determines the kind of output (text
or binary or gzipped, one big file or one per timestep, one big file
or one per processor).
</P>
<HR>

<P>The <I>molecule</I> and <I>grid</I> and <I>surf</I> styles create files in a simple
text format that is self-explanatory when viewing a dump file.  Many
of the SPARTA <A HREF = "Section_tools.html">post-processing tools</A>, including
<A HREF = "http://pizza.sandia.gov">Pizza.py</A>, work with this format.
</P>
<P>For post-processing purposes the text files are self-describing in the
following sense.
</P>
<P>The dimensions of the simulation box are included in each snapshot.
This information is is formatted as:
</P>
<PRE>ITEM: BOX BOUNDS xx yy zz
xlo xhi
ylo yhi
zlo zhi 
</PRE>
<P>where xlo,xhi are the maximum extents of the simulation box in the
x-dimension, and similarly for y and z.  The "xx yy zz" represent 6
characters that encode the style of boundary for each of the 6
simulation box boundaries (xlo,xhi and ylo,yhi and zlo,zhi).  Each of
the 6 characters is either o = outflow, p = periodic, or s = specular.
See the <A HREF = "doc/boundary.html">boundary</A> command for details.
</P>
<P>The "ITEM: ATOMS" or "ITEM: CELLS" or "ITEM: SURFS" line in each
snapshot lists column descriptors for the per-molecule or per-grid or
per-surf lines that follow.  The descriptors will be the attributes
you specify in the dump command for the style.
</P>
<P>Styles <I>molecule</I> and <I>grid</I> and <I>surf</I> allow you to specify a list of
attributes to be written to the dump file for each molecule or grid
cell or surface.  Possible attributes are listed above and will appear
in the order specified.  An explanation of the possible attributes is
given below.
</P>
<HR>

<P>Dumps are performed on timesteps that are a multiple of N (including
timestep 0).  Note that this means a dump will not be performed on the
initial timestep after the dump command is invoked, if the current
timestep is not a multiple of N.  This behavior can be changed via the
<A HREF = "dump_modify.html">dump_modify first</A> command.  N can be changed
between runs by using the <A HREF = "dump_modify.html">dump_modify every</A>
command.
</P>
<P>The specified filename determines how the dump file(s) is written.
The default is to write one large text file, which is opened when the
dump command is invoked and closed when an <A HREF = "undump.html">undump</A>
command is used or when SPARTA exits.
</P>
<P>Dump filenames can contain two wildcard characters.  If a "*"
character appears in the filename, then one file per snapshot is
written and the "*" character is replaced with the timestep value.
For example, tmp.dump.* becomes tmp.dump.0, tmp.dump.10000,
tmp.dump.20000, etc.  Note that the <A HREF = "dump_modify.html">dump_modify pad</A>
command can be used to insure all timestep numbers are the same length
(e.g. 00010), which can make it easier to read a series of dump files
in order by some post-processing tools.
</P>
<P>If a "%" character appears in the filename, then one file is written
for each processor and the "%" character is replaced with the
processor ID from 0 to P-1.  For example, tmp.dump.% becomes
tmp.dump.0, tmp.dump.1, ... tmp.dump.P-1, etc.  This creates smaller
files and can be a fast mode of output on parallel machines that
support parallel I/O for output.
</P>
<P>Note that the "*" and "%" characters can be used together to produce a
large number of small dump files!
</P>
<P>If the filename ends with ".bin", the dump file (or files, if "*" or
"%" is also used) is written in binary format.  A binary dump file
will be about the same size as a text version, but will typically
write out much faster.  Of course, when post-processing, you will need
to convert it back to text format (see the <A HREF = "Section_tools.html#binary">binary2txt
tool</A>) or write your own code to read the
binary file.  The format of the binary file can be understood by
looking at the tools/binary2txt.cpp file.  This option is only
available for the <I>molecule</I> style.
</P>
<P>If the filename ends with ".gz", the dump file (or files, if "*" or "%"
is also used) is written in gzipped format.  A gzipped dump file will
be about 3x smaller than the text version, but will also take longer
to write.
</P>
<HR>

<P>This section explains the molecule attributes that can be specified as
part of the <I>molecule</I> style.
</P>
<P><I>Id</I> is the molecule ID.  <I>Type</I> is an integer index representing the
molecule species.  <I>Proc</I> is the ID of the processor which owns the
grid cell.
</P>
<P>The <I>x</I>, <I>y</I>, <I>z</I> attributes write molecule coordinates "unscaled", in
the appropriate distance <A HREF = "units.html">units</A>.  Use <I>xs</I>, <I>ys</I>, <I>zs</I> if
you want the coordinates "scaled" to the box size, so that each value
is 0.0 to 1.0.
</P>
<P><I>Vx</I>, <I>vy</I>, <I>vz</I> are components of molecule velocity.
</P>
<P>The <I>c_ID</I> and <I>c_ID[N]</I> attributes allow per-molecule vectors or
arrays calculated by a <A HREF = "compute.html">compute</A> to be output.  The ID in
the attribute should be replaced by the actual ID of the compute that
has been defined previously in the input script.  See the
<A HREF = "compute.html">compute</A> command for details.
</P>
<P>If <I>c_ID</I> is used as a attribute, then the per-molecule vector
calculated by the compute is printed.  If <I>c_ID[N]</I> is used, then N
must be in the range from 1-M, which will print the Nth column of the
M-length per-molecule array calculated by the compute.
</P>
<P>The <I>f_ID</I> and <I>f_ID[N]</I> attributes allow vector or array
per-molecule quantities calculated by a <A HREF = "fix.html">fix</A> to be output.
The ID in the attribute should be replaced by the actual ID of the fix
that has been defined previously in the input script.
</P>
<P>If <I>f_ID</I> is used as a attribute, then the per-molecule vector
calculated by the fix is printed.  If <I>f_ID[N]</I> is used, then N must
be in the range from 1-M, which will print the Nth column of the
M-length per-molecule array calculated by the fix.
</P>
<P>The <I>v_name</I> attribute allows per-molecule vectors calculated by a
<A HREF = "variable.html">variable</A> to be output.  The name in the attribute
should be replaced by the actual name of the variable that has been
defined previously in the input script.  Only a molecule-style
variable can be referenced, since it is the only style that generates
per-molecule values.  Variables of style <I>molecule</I> can reference
per-molecule attributes, stats keywords, or invoke other computes,
fixes, or variables when they are evaluated, so this is a very general
means of creating quantities to output to a dump file.
</P>
<P>See <A HREF = "Section_modify.html">Section_modify</A> of the manual for information
on how to add new compute and fix styles to SPARTA to calculate
per-molecule quantities which could then be output into dump files.
</P>
<HR>

<P>This section explains the grid cell attributes that can be specified
as part of the <I>grid</I> style.
</P>
<P><I>Id</I> is the grid cell ID.  <I>Proc</I> is the ID of the processor which
owns the grid cell.
</P>
<P>The <I>xlo</I>, <I>ylo</I>, <I>zlo</I> attributes write the coordinates of the
lower-left corner of the grid cell in the appropriate distance
<A HREF = "units.html">units</A>.  The <I>xhi</I>, <I>yhi</I>, <I>zhi</I> attributes write the
coordinates of the upper-right corner of the grid cell.
The <I>zlo</I> and <I>zhi</I> attributes cannot be used for a 2d simulation.
</P>
<P>The <I>c_ID</I> and <I>c_ID[N]</I> attributes allow per-grid vectors or arrays
calculated by a <A HREF = "compute.html">compute</A> to be output.  The ID in the
attribute should be replaced by the actual ID of the compute that has
been defined previously in the input script.  See the
<A HREF = "compute.html">compute</A> command for details.
</P>
<P>If <I>c_ID</I> is used as a attribute, and the compute calculates a
per-grid vector, then the per-grid vector is printed.  If <I>c_ID[N]</I>
is used, then N must be in the range from 1-M, which will print the
Nth column of the M-column per-grid array calculated by the compute.
If <I>c_ID</I> is used, and the compute calculates a per-grid array, then
it is the same as if the individual columns of the array had been
listed one by one.  See the example below for fixes.
</P>
<P>The <I>f_ID</I> and <I>f_ID[N]</I> attributes allow per-grid vectors or arrays
calculated by a <A HREF = "fix.html">fix</A> to be output.  The ID in the attribute
should be replaced by the actual ID of the fix that has been defined
previously in the input script.
</P>
<P>If <I>f_ID</I> is used as a attribute, and the fix calculates a per-grid
vector, then the per-grid vector is printed.  If <I>f_ID[N]</I> is used,
then N must be in the range from 1-M, which will print the Nth column
of the M-columne per-grid array calculated by the fix.  If <I>f_ID</I> is
used, and the fix calculates a per-grid array, then it is the same as
if the individual columns of the array had been listed one by one.
E.g. these 2 dump commands are equivalent for a simulation with 1
species, since the fix ave/grid standard command produces a 7-column
per-grid array:
</P>
<PRE>fix 1 ave/grid 10 100 1000 standard
dump 1 grid 1000 tmp.grid id f_1
dump 1 grid 1000 tmp.grid id f_1[1] f_1[2] f_1[3] f_1[4] f_1[5] f_1[6] f_1[7] 
</PRE>
<P>The <I>v_name</I> attribute allows per-grid vectors calculated by a
<A HREF = "variable.html">variable</A> to be output.  The name in the attribute
should be replaced by the actual name of the variable that has been
defined previously in the input script.  Only a grid-style variable
can be referenced, since it is the only style that generates per-grid
values.  Variables of style <I>grid</I> can reference per-grid attributes,
stats keywords, or invoke other computes, fixes, or variables when
they are evaluated, so this is a very general means of creating
quantities to output to a dump file.
</P>
<P>See <A HREF = "Section_modify.html">Section_modify</A> of the manual for information
on how to add new compute and fix styles to SPARTA to calculate per-grid
quantities which could then be output into dump files.
</P>
<HR>

<P>This section explains the surface element attributes that can be
specified as part of the <I>surf</I> style.  For 2d simulations, a surface
element is a line segment with 2 end points.  Crossing the unit +z
vector into the vector (v2-v1) determines the outward normal of the
line segment.  For 3d simulations, a surface element is a triangle
with 3 corner points.  Crossing (v2-v1) into (v3-v1) determines the
outward normal of the triangle.
</P>
<P><I>Id</I> is the surface element ID.
</P>
<P>The <I>v1x</I>, <I>v1y</I>, <I>v1z</I>, <I>v2x</I>, <I>v2y</I>, <I>v2z</I>, <I>v3x</I>, <I>v3y</I>, <I>v3z</I>
attributes write the coordinates of the vertices of the end or corner
points of the surface element.  The <I>v1z</I>, <I>v2z</I>, <I>v3x</I>, <I>v3y</I>, and
<I>v3z</I> attributes cannot be used for a 2d simulation.
</P>
<P>The <I>c_ID</I> and <I>c_ID[N]</I> attributes allow per-surf vectors or arrays
calculated by a <A HREF = "compute.html">compute</A> to be output.  The ID in the
attribute should be replaced by the actual ID of the compute that has
been defined previously in the input script.  See the
<A HREF = "compute.html">compute</A> command for details.
</P>
<P>If <I>c_ID</I> is used as a attribute, and the compute calculates a
per-srf vector, then the per-surf vector is printed.  If <I>c_ID[N]</I>
is used, then N must be in the range from 1-M, which will print the
Nth column of the M-column per-surf array calculated by the compute.
If <I>c_ID</I> is used, and the compute calculates a per-surf array, then
it is the same as if the individual columns of the array had been
listed one by one.  See the example below for fixes.
</P>
<P>The <I>f_ID</I> and <I>f_ID[N]</I> attributes allow per-surf vectors or arrays
calculated by a <A HREF = "fix.html">fix</A> to be output.  The ID in the attribute
should be replaced by the actual ID of the fix that has been defined
previously in the input script.
</P>
<P>If <I>f_ID</I> is used as a attribute, and the fix calculates a per-surf
vector, then the per-surf vector is printed.  If <I>f_ID[N]</I> is used,
then N must be in the range from 1-M, which will print the Nth column
of the M-columne per-surf array calculated by the fix.  If <I>f_ID</I> is
used, and the fix calculates a per-surf array, then it is the same as
if the individual columns of the array had been listed one by one.
E.g. these 2 dump commands are equivalent for a simulation with 1
species, since the fix ave/surf standard command produces a 7-column
per-surf array:
</P>
<PRE>fix 1 ave/surf 10 100 1000 standard
dump 1 surf 1000 tmp.surf id f_1
dump 1 surf 1000 tmp.surf id f_1[1] f_1[2] f_1[3] f_1[4] f_1[5] f_1[6] f_1[7] 
</PRE>
<P>The <I>v_name</I> attribute allows per-surf vectors calculated by a
<A HREF = "variable.html">variable</A> to be output.  The name in the attribute
should be replaced by the actual name of the variable that has been
defined previously in the input script.  Only a surf-style variable
can be referenced, since it is the only style that generates per-surf
values.  Variables of style <I>surf</I> can reference per-surf attributes,
stats keywords, or invoke other computes, fixes, or variables when
they are evaluated, so this is a very general means of creating
quantities to output to a dump file.
</P>
<P>See <A HREF = "Section_modify.html">Section_modify</A> of the manual for information
on how to add new compute and fix styles to SPARTA to calculate per-surf
quantities which could then be output into dump files.
</P>
<HR>

<P><B>Restrictions:</B>
</P>
<P>To write gzipped dump files, you must compile SPARTA with the
-DSPARTA_GZIP option - see the <A HREF = "Section_start.html#start_2">Making SPARTA</A>
section of the documentation.
</P>
<P><B>Related commands:</B>
</P>
<P><A HREF = "dump_image.html">dump image</A>, <A HREF = "dump_modify.html">dump_modify</A>,
<A HREF = "undump.html">undump</A>
</P>
<P><B>Default:</B>
</P>
<P>The defaults for the image style are listed on the <A HREF = "dump_image.html">dump
image</A> doc page.
</P>
</HTML>
